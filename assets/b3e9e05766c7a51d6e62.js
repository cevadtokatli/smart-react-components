"use strict";(self.webpackChunksmart_react_components_page=self.webpackChunksmart_react_components_page||[]).push([[8571],{48571:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function c(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,u)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(17989),i=n(67294),c=n(12788),u=n(18),s=n(17523);t.default=({beforeShow:e,boxEl:t,getTriggerEl:n,handlePosition:l,hoverDelay:a,isDismissible:v,key:d,setStatus:m,status:E,triggerInteraction:L})=>{const g=(0,c.useTheme)(),w=(0,i.useRef)(null),f=(0,i.useRef)(null),h=(0,i.useRef)(null),T=(0,i.useRef)(null),b=(0,i.useRef)(null),[k,p]=(0,i.useState)((()=>!1)),C=()=>null!=E?E:k,I=()=>null!=m?m:p,_=e=>{T.current=null;const t=n();(0,s.isTargetClickable)(e.target,t)&&I()(!C())},R=e=>{e.preventDefault(),T.current=e;const t=n();(0,s.isTargetClickable)(e.target,t)&&I()(!0)},x=e=>{T.current=e,b.current=Date.now();const t=n();(0,o.addEventListener)(t,["touchmove"],y),(0,o.addEventListener)(t,["touchend"],P),setTimeout((()=>{b.current&&(b.current=null,(0,o.removeEventListener)(t,["touchmove"],y),(0,o.removeEventListener)(t,["touchend"],P),m(!0))}),1500)},y=e=>{if(b.current){const t=n(),r=e.touches[0],i=r.pageX,c=r.pageY,u=t.getBoundingClientRect();i<u.left||i>u.right||c<u.top||c>u.bottom?(b.current=null,(0,o.removeEventListener)(t,["touchmove"],y),(0,o.removeEventListener)(t,["touchend"],P)):T.current=e}},P=e=>{if(b.current){b.current=null;const e=n();(0,o.removeEventListener)(e,["touchmove"],y),(0,o.removeEventListener)(e,["touchend"],P)}},M=e=>{T.current=null,e.target===n()&&(a?w.current||(w.current=setTimeout((()=>I()(!0)),a),f.current=$,(0,o.addEventListener)(window,["mousemove"],f.current)):I()(!0))},S=e=>{T.current=null;const r=e.target;n().contains(r)||t.current.contains(r)||r.closest("[data-src-not-clickable]")||I()(!1)},$=e=>{var r;const i=e.target;n().contains(i)||(null===(r=t.current)||void 0===r?void 0:r.contains(i))?h.current&&(clearTimeout(h.current),h.current=null):(w.current&&((0,o.removeEventListener)(window,["mousemove"],f.current),f.current=null,clearTimeout(w.current),w.current=null),h.current||(h.current=setTimeout((()=>{clearTimeout(h.current),h.current=null,I()(!1)}),250)))};return(0,i.useEffect)((()=>{C()&&l(null)}),[]),(0,i.useEffect)((()=>{const e=n(),r=(0,o.debounce)($),i=(0,o.debounce)((e=>{t.current.contains(e.target)||l(T.current)})),c=()=>l(T.current);return L&u.TriggerInteraction.CLICK&&((0,o.addEventListener)(e,["click"],_),C()&&v&&(0,o.addEventListener)(window,["click"],S)),!g.$.vars.isMobile&&L&u.TriggerInteraction.HOVER&&(C()?(0,o.addEventListener)(window,["mousemove"],r):(0,o.addEventListener)(e,["mouseenter"],M)),L&u.TriggerInteraction.RIGHT_CLICK&&(g.$.vars.isMobile?(0,o.addEventListener)(e,["touchstart"],x):(0,o.addEventListener)(e,["contextmenu"],R),C()&&((0,o.addEventListener)(e,["click"],_),(0,o.addEventListener)(window,["click","contextmenu"],S))),C()&&(0,o.addEventListener)(window,["resize","scroll"],i),(0,o.addEventListener)(e,["src.fixedBox.setPosition"],c),()=>{L&u.TriggerInteraction.CLICK&&((0,o.removeEventListener)(e,["click"],_),C()&&v&&(0,o.removeEventListener)(window,["click"],S)),!g.$.vars.isMobile&&L&u.TriggerInteraction.HOVER&&(C()?(0,o.removeEventListener)(window,["mousemove"],r):(0,o.removeEventListener)(e,["mouseenter"],M)),L&u.TriggerInteraction.RIGHT_CLICK&&(g.$.vars.isMobile?(0,o.removeEventListener)(e,["touchstart"],x):(0,o.removeEventListener)(e,["contextmenu"],R),C()&&((0,o.removeEventListener)(e,["click"],_),(0,o.removeEventListener)(window,["click","contextmenu"],S))),C()&&(0,o.removeEventListener)(window,["resize","scroll"],i),(0,o.removeEventListener)(e,[`src.${d}.setPosition`],c)}}),[E,m,k,p,L]),{getStatus:C,handleBeforeShow:t=>new Promise((n=>r(void 0,void 0,void 0,(function*(){yield null==e?void 0:e(t),l(T.current),n()}))))}}}}]);